<h1>スポット登録</h1>
<div class="flash_area">
	<%= flash[:notice] %>
	<%= flash[:warning] %>
</div>

<!-- <div id="map_canvas" style="width:400px; height:400px"><div> -->



<script src="http://maps.google.com/maps/api/js?&libraries=places&key=AIzaSyDSm9JoN7yTni_Q6NOHxFPl9WxiGKn5J9U&language=ja"></script>

<script type="text/javascript">
// function sample1() {
// 	var latlng = new google.maps.LatLng(34.985458,135.757755);
// 	var opts = {
// 		//地図の縮尺
// 		zoom: 12,
// 		//地図の中心座標
// 		center: latlng,
// 		//地図の種類
// 		mapTypeId: google.maps.MapTypeId.ROADMAP,
// 		};
// 		//マップの表示
// 		map = new google.maps.Map(document.getElementById("map_canvas"), opts);
// 		//検索パラメータ
// 		var request = {
// 		//検索の中心座標
// 		location: latlng,
// 		//検索の範囲(メートル)
// 		// radius: '500',
// 		//検索文字列
// 		query: '金閣寺'
// 	};

// 	//プレイス検索
// 	service = new google.maps.places.PlacesService(map);
// 	service.textSearch(request, callback);

// }

// //検索結果の処理
// function callback(results, status) {
// 	if (status == google.maps.places.PlacesServiceStatus.OK) {
// 		for (var i = 0; i < results.length; i++) {
// 			createMarker(results[i]);
// 		}
// 	}
// }

// // マーカーを表示
// function createMarker(place) {
// 	var marker = new google.maps.Marker({
// 		position: place.geometry.location,
// 		map: map,
// 		title :place.name
// 	});
// }
// window.onload = sample1;



//情報取得
// function getPlace() {
// 	var service = new google.maps.places.PlacesService(map);
// 	service.findPlaceFromQuery({
//     	query: '金閣寺',
//     	fields: ['name', 'formatted_address', 'url', 'place_id]
// 	}, function(results, status) {
//     	if (status == google.maps.places.PlacesServiceStatus.OK) {
//         	// 配列となっていますが、1件しか返ってきません
//         	for (var i = 0; i < results.length; i++) {
//             	var place = results[i];
//             	console.log(place);
//         	}
//     	}
// 	}
// };

</script>

<div class="spotinfo">
	<%= image_tag("no_spotimage.jpg", :size => "350x200") %>

	<!-- local:trueを外すと、remote:trueになる -->
	<%= form_with model: @spot, local: true  do |f| %>
	  <%= f.file_field :spotimage %><br>
	  <label>名称</label>
	  <%= f.text_field :name %><br>
	  <label>詳細情報</label>
	  <%= f.text_field :description %><br>
	  <label>住所</label>
	  <%= f.text_field :address %><br>
	  <label>ホームページのURL</label>
	  <%= f.text_field :url %><br>
	  <label>カテゴリ</label>
	  <%= f.collection_select :category_id, Category.all, :id, :category_name, { include_blank: true}, class: "form" %>
<br>
	  <%= f.submit '登録' %>
	<% end %>
</div>




<!-- プレビュー機能 -->
<script>
// 	$(document).on('turbolinks:load', function() {

//   $('#item_images').on('change',function(e){
//     var files = e.target.files;
//     var d = (new $.Deferred()).resolve();
//     $.each(files,function(i,file){
//       d = d.then(function(){return previewImage(file)});
//     });
//   })

//   var previewImage = function(imageFile){
//     var reader = new FileReader();
//     var img = new Image();
//     var def =$.Deferred();
//     reader.onload = function(e){
//       $('.images_field').append(img);
//       img.src = e.target.result;
//       def.resolve(img);
//     };
//     reader.readAsDataURL(imageFile);
//     return def.promise();
//   }
// })
</script>